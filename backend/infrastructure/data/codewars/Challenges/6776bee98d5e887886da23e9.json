{
  "id": "6776bee98d5e887886da23e9",
  "name": "Tracking Active Bookings Over Time ",
  "slug": "tracking-active-bookings-over-time",
  "category": "reference",
  "publishedAt": "2025-01-02T16:30:34.934Z",
  "approvedAt": "2025-01-05T09:50:48.001Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/6776bee98d5e887886da23e9",
  "rank": {
    "id": -6,
    "name": "6 kyu",
    "color": "yellow"
  },
  "createdAt": "2025-01-02T16:29:29.369Z",
  "createdBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "You are a data analyst at a subscription-based e-learning platform. It allows users to book courses in advance, and the platform keeps track of both the booking date and the course start date. Management has tasked you with analyzing how many \"active bookings\" exist on each `booking_date`.\n\nWrite an SQL query to calculate the number of active bookings for each `booking_date` in the system. The results should include all `booking_date` values from the `course_bookings` table, and the count of active bookings for each.\n\n`course_bookings` table:\n\n* `id` (int, primary key):\tUnique identifier for the booking.\n* `course_id`\t(int, foreign key)\tIdentifier for the course.\n* `user_id` (int): Identifier for the user who booked the course.\n* `course_start_date` (date):\tThe date when the course is scheduled to start.\n* `booking_date` (date): The date when the user booked the course.\n\nAn \"active booking\" is defined as a course booking that:\n\n1) Was booked on or before a given `booking_date`.\n2) Has a `course_start_date` that is on or after the `booking_date`, meaning it has not yet started.\n\nResultant columns:\n\n1) `booking_date`: the date on which bookings were made\n2) `active_bookings`: the count of all active bookings\n    \nThe result is ordered by `booking_date` in ascending order.\n\nFor this sample data:\n\n```\n| id | course_id | user_id | course_start_date | booking_date |\n+----+-----------+---------+-------------------+--------------+\n| 1  | 101       | 1       | 2025-01-01        | 2025-01-01   |\n| 2  | 102       | 2       | 2025-01-06        | 2025-01-01   |\n| 3  | 102       | 3       | 2025-01-06        | 2025-01-01   |\n| 4  | 103       | 4       | 2025-01-07        | 2025-01-02   |\n| 5  | 104       | 5       | 2025-01-08        | 2025-01-03   |\n| 6  | 105       | 6       | 2025-01-09        | 2025-01-04   |\n| 7  | 106       | 7       | 2025-01-10        | 2025-01-05   |\n| 8  | 106       | 8       | 2025-01-10        | 2025-01-05   |\n| 9  | 106       | 9       | 2025-01-10        | 2025-01-05   |\n| 10 | 106       | 10      | 2025-01-10        | 2025-01-05   |\n| 11 | 106       | 11      | 2025-01-10        | 2025-01-05   |\n| 12 | 107       | 12      | 2025-01-11        | 2025-01-05   |\n```\n\nexpected output is the following:\n\n```\n| booking_date | active_bookings |\n+--------------+-----------------+\n| 2025-01-01   | 3               |\n| 2025-01-02   | 3               |\n| 2025-01-03   | 4               |\n| 2025-01-04   | 5               |\n| 2025-01-05   | 11              |\n```\n\n* 2025-01-01: 3 bookings are active (IDs: 1, 2, 3).\n* 2025-01-02: 3 bookings are active  (IDs: 2, 3, 4) because ID 1 is no longer active (it started on 2025-01-01).\n* 2025-01-03: 4 bookings are active (IDs: 2, 3, 4, 5).\n* 2025-01-04: 5 bookings are active (IDs: 2, 3, 4, 5, 6).\n* 2025-01-05: 11 bookings are active (IDs: 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12).\n\nGLHF!",
  "totalAttempts": 657,
  "totalCompleted": 138,
  "totalStars": 6,
  "voteScore": 37,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}