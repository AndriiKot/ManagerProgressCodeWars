{
  "id": "64f04aeeab2583003c819b1e",
  "name": "Genre Analysis with PostgreSQL Arrays",
  "slug": "genre-analysis-with-postgresql-arrays",
  "category": "reference",
  "publishedAt": "2023-08-31T08:10:26.708Z",
  "approvedAt": "2023-09-13T20:29:18.373Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/64f04aeeab2583003c819b1e",
  "rank": {
    "id": -7,
    "name": "7 kyu",
    "color": "white"
  },
  "createdAt": "2023-08-31T08:10:22.110Z",
  "createdBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "We have a table named `books` with the following schema:\n\n* `id` (integer) - The unique identifier for each book entry.\n* `title` (varchar) - The title of the book.\n* `author` (varchar) - The author of the book.\n* `genres` (varchar[]) - An array of genres associated with the book.\n\nWrite a SQL query to achieve the following:\n\n1) Return a list of genres.\n2) Count the number of books in each genre.\n3) List titles of the books in each genre as an array. The titles within this array should be sorted alphabetically.\n\nThe output should be ordered by the number of books in each genre in descending order, and then alphabetically by genre name for genres with the same book count.\n\nGLHF!\n\n### Desired Output\n\nThe desired output should look like this:\n\n<table><!----><tr><th>genre</th><th>count</th><th>books</th></tr><tr><td>Adventure</td><td>2</td><td>{\"Harry Potter\",\"Lord of the Rings\"}</td></tr><tr><td>Dystopian</td><td>2</td><td>{1984,\"Brave New World\"}</td></tr><tr><td>Fantasy</td><td>2</td><td>{\"Harry Potter\",\"Lord of the Rings\"}</td></tr><tr><td>Science Fiction</td><td>2</td><td>{\"Brave New World\",Foundation}</td></tr><tr><td>Political</td><td>1</td><td>{1984}</td></tr></table>",
  "totalAttempts": 1232,
  "totalCompleted": 265,
  "totalStars": 12,
  "voteScore": 64,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}