{
  "id": "66c71c893759d440748154f8",
  "name": "Number of countries visited",
  "slug": "number-of-countries-visited",
  "category": "reference",
  "publishedAt": "2024-08-23T21:32:44.155Z",
  "approvedAt": "2024-09-03T17:00:50.778Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/66c71c893759d440748154f8",
  "rank": {
    "id": -7,
    "name": "7 kyu",
    "color": "white"
  },
  "createdAt": "2024-08-22T11:10:02.046Z",
  "createdBy": {
    "username": "atlas_codes",
    "url": "https://www.codewars.com/users/atlas_codes"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "# How many foreign countries has each person visited?\n\n## Description\n\nIn this kata, you are provided with a database that contains information about people and their visits to various countries.\n\nYour task is to figure out how many countries each person has visited.\n\n## Database Schema\n\n`people` table:\n- `id` (integer, primary key): Unique identifier for the person.\n- `name` (string): The person's name. You can assume that the names are unique.\n\n`countries` table:\n- `id` (integer, primary key): Unique identifier for the country.\n- `name` (string, unique): The name of the country.\n\n`visits` table:\n- `id` (integer, primary key): Unique identifier for the visit.\n- `person_id` (integer, foreign key): Refers to a person.\n- `country_id` (integer, foreign key): Refers to a country.\n- `year` (integer): The year of the visit.\n\n## Requirements\n\n1. Return a list of people and the number of countries they have visited.\n2. First, sort the list by the number of countries visited, from highest to lowest. Then, if any people have the same number of countries visited, sort them by the person's name ascending.\n4. Include all people in the list, even if they haven't visited any foreign countries.\n5. Make sure to count the number of different countries each person has visited, as opposed to their total number of visits.\n\n## Example\n\nGiven this sample data:\n\n```\npeople:\n\n| id | name  |\n|----|-------|\n| 1  | Tim   |\n| 2  | Bob   |\n| 3  | Sally |\n| 4  | Alex  |\n```\n\n```\ncountries:\n\n| id | name          |\n|----|---------------|\n| 1  | Great Britain |\n| 2  | Spain         |\n| 3  | Argentina     |\n| 4  | Montenegro    |\n| 5  | Japan         |\n```\n\n```\nvisits:\n\n| id | person_id | country_id | year |\n|----|-----------|------------|------|\n| 1  | 1         | 1          | 2019 |\n| 2  | 1         | 4          | 2024 |\n| 3  | 2         | 1          | 2000 |\n| 4  | 2         | 2          | 2010 |\n| 5  | 2         | 4          | 2012 |\n| 6  | 2         | 4          | 2022 |\n| 7  | 2         | 5          | 2023 |\n| 8  | 3         | 4          | 2021 |\n\n```\n\nYou should return the following result:\n\n```\n| name  | countries_visited |\n|-------|-------------------|\n| Bob   | 4                 |\n| Tim   | 2                 |\n| Sally | 1                 |\n| Alex  | 0                 |\n```",
  "totalAttempts": 2933,
  "totalCompleted": 806,
  "totalStars": 17,
  "voteScore": 108,
  "tags": [
    "SQL"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}