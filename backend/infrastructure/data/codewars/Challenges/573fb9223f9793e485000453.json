{
  "id": "573fb9223f9793e485000453",
  "name": "Training JS #42: Regular Expression--( ?: ), ( ?= ) and ( ?! )",
  "slug": "training-js-number-42-regular-expression-equals-and",
  "category": "reference",
  "publishedAt": "2016-05-21T09:37:15.559Z",
  "approvedAt": "2016-06-17T15:07:45.273Z",
  "languages": [
    "javascript"
  ],
  "url": "https://www.codewars.com/kata/573fb9223f9793e485000453",
  "rank": {
    "id": -7,
    "name": "7 kyu",
    "color": "white"
  },
  "createdAt": "2016-05-21T01:25:55.063Z",
  "createdBy": {
    "username": "myjinxin2015",
    "url": "https://www.codewars.com/users/myjinxin2015"
  },
  "approvedBy": {
    "username": "donaldsebleung",
    "url": "https://www.codewars.com/users/donaldsebleung"
  },
  "description": "In this lesson, we learn about: ```(?:)```, ```(?=)``` and ```(?!)```. There is not much content in this lesson, but it is not easy to understand.\n\nUse ```(?:)``` to define a sub expression that is not used for the ```backreference```, this is the difference between it and common sub expressions. See an example:\n```javascript\nvar str=\"aab abb aba\"\nvar re1=/\\b(a)(\\w)\\1\\b/g\nvar re2=/\\b(?:a)(\\w)\\1\\b/g\nconsole.log( str.match(re1) )  //output: [ 'aba' ]\nconsole.log( str.match(re2) )  //output: [ 'abb' ]\n```\nWe can see that ```\\1``` in re1 is ```backreference``` from ```(a)```, and ```\\1``` in re2 is ```backreference``` from ```(\\w)```. It tells the compiler that the sub expression does not need to be saved, which helps to reduce the operation of the code. Look at another example:\n```javascript\nvar str=\"dogs cats sheeps car bar star\"\nvar re1=/\\b\\w+(?:s|ar)\\b/g\nvar re2=/\\b\\w+(?:s|ar)\\b/\nvar re3=/\\b\\w+(s|ar)\\b/\nconsole.log( str.match(re1) )  \n//output: [ 'dogs', 'cats', 'sheeps', 'car', 'bar', 'star' ]\nconsole.log( str.match(re2) )  \n//output: [ 'dogs', index: 0, input: 'dogs cats sheeps car bar star' ]\nconsole.log( str.match(re3) )  \n//output: [ 'dogs', 's', index: 0, input: 'dogs cats sheeps car bar star' ]\n```\nIn the example above, if the g option is used, it will match 6 strings. re2 and re3 do not use the g option, and we can see the details of the first match: re3 saved a \"s\", while re2 did not save. This means that if two expressions are using the g option, the expression that did not uses ```(?:)``` will save more than 6 strings.\n\nThat is, if you don't need a backreference, use ```(?:)``` will make your code faster.\n\n```(?=)``` and ```(?!)``` belong to the assertion statement of regular expressions. In fact, regular expressions has four kinds of assertion statements: ```Lookahead Positive Assertion, Lookahead Negative Assertion,  Lookbehind Positive Assertion, Lookbehind Negative Assertion```. Unfortunately, only two kinds in the JS. ```(?=)``` is the Positive Assertion, and ```(?!)``` is the Negative Assertion. They are the opposite. They can be placed in the front or back of the regular expression, which indicates \"Lookahead\" or \"Lookbehind\".\n\nIf they are placed in the front of the regular expression, means \"the match string should start with..\" or \"should not start with..\". See a simple example:\n```javascript\nvar str=\"javascript coffeescript vbscript javacode\"\nvar re1=/\\b\\w+script\\b/g\nvar re2=/(?=java)\\b\\w+script\\b/g\nvar re3=/(?!java)\\b\\w+script\\b/g\nconsole.log( str.match(re1))  //output: [ 'javascript', 'coffeescript',  'vbscript' ]\nconsole.log( str.match(re2))  //output: [ 'javascript' ]\nconsole.log( str.match(re3))  //output: [ 'coffeescript', 'vbscript' ]\n```\nIn the example above, re1 is an ordinary regular expression that matches all the strings that are end with \"script\". re2 add a ```Positive Assertion``` in front of re1, like a filter statement, equivalent to:  ```str.match(re1).filter(x=>/^java/.test(x)\")``` ; re3 add a ```Negative Assertion``` in front of re1, equivalent to: ```str.match(re1).filter(x=>!/^java/.test(x))```. \n\nIt should be noted that the assertion itself is not captured, it is only a \"condition\", some people call it \"zero width assertion\".\n\nIf they are placed in the back of a regular expression, it does not means \"should end with...\" or \"should not end with...\", it means \"... must appear in the back of the match string\" or \"... should not appear in the back of the match string\". Let's see example:\n```javascript\nvar str=\"dog,cat,pig,cow\"\nvar re1=/\\b\\w+\\b/g\nvar re2=/\\b\\w+\\b(?=,cat|,pig)/g   \nvar re3=/\\b\\w+\\b(?!,cat|,pig)/g\nvar re4=/(?=c)\\b\\w+\\b(?!,cat|,pig)/g  \nconsole.log( str.match(re1))  //output: [ 'dog', 'cat', 'pig', 'cow' ]\nconsole.log( str.match(re2))  //output: [ 'dog', 'cat' ]\nconsole.log( str.match(re3))  //output: [ 'pig', 'cow' ]\nconsole.log( str.match(re4))  //output: [ 'cow' ]\n```\nWhy do the same expressions have different meanings in different postions? In fact, the statement above is not the ```\"truth\"```. Let us reveal the ```truth```:\n\n```(?=)``` and ```(?!)``` are matches a postion with zero width, their true meaning should be \"from this postion to the right should be ...\" and \"from this postion to the right should not be ...\". Let's look at the example above where they match the postion:\n```javascript\nvar str=\"javascript coffeescript vbscript javacode\"\nvar re2=/(?=java)\\b\\w+script\\b/g\n//they match these postion:\nzjavascript zcoffeescript zvbscript zjavacode\n^           ^             ^         ^\nz means a \"zero with\", If \"java\" on the right of \nthese postion should match success.\n\nvar str=\"dog,cat,pig,cow\"\nvar re2=/\\b\\w+\\b(?=,cat|,pig)/g   \n\ndogz,catz,pigz,cowz\n   ^    ^    ^    ^\nIf \",cat\" or \",pig\" on the right of these postion should match success.\n```\nFinally, we look at a classic example, add commas to the \"money\", such as convert \"$123456789\" to \"$123,456,789\":\n```javascript\nfunction addCommas(money){\n  var re=/\\d{3}/g\n  return money.replace(re,x=>x+\",\")\n}\nconsole.log( addCommas(\"$123456789\") ) //output: $123,456,789,\n```\nLooks very strange, there should be no comma at the end. It looks like the code needs to be improved:\n```javascript\nfunction addCommas(money){\n  var re=/\\d{3}(?!$)/g\n  return money.replace(re,x=>x+\",\")\n}\nconsole.log( addCommas(\"$123456789\") ) //output: $123,456,789\n```\nOkay, now it looks normal. But let's do some tests:\n```javascript\nfunction addCommas(money){\n  var re=/\\d{3}(?!$)/g\n  return money.replace(re,x=>x+\",\")\n}\nconsole.log( addCommas(\"$123456789\") )  //output: $123,456,789\nconsole.log( addCommas(\"$123456\") )     //output: $123,456\nconsole.log( addCommas(\"$1234567890\") ) //output: $123,456,789,0\nconsole.log( addCommas(\"$1234567\") )    //output: $123,456,7\n```\nOh, NO~~ This is not the result we want. Function returns the correct result only when the number length is a multiple of 3. It seems that we need to change ideas. \n\nI am a bit tired, so this is your task of this kata: help me to complete this function.\n\n## Task\n    \nYour task is coding in function ```addCommas```. Function accepts 2 parameters: ```money``` and ```reg```. ```money``` is a string, it only contains \"$\" and numbers. To avoid someone being lazy, so you should defined a regular expression outside function, its name should be ```regex```. It will passed to the function as parameter reg. You can write code that uses this regular expression in the function, such as using ```replace()``` or other methods.\n\n## Examples\n```\naddCommas(\"$123\",regex) should return \"$123\"\naddCommas(\"$1234\",regex) should return \"$1,234\"\naddCommas(\"$12345\",regex) should return \"$12,345\"\naddCommas(\"$1234567\",regex) should return \"$1,234,567\"\naddCommas(\"$123456789\",regex) should return \"$123,456,789\"\n```\n    \n## [Series](http://github.com/myjinxin2015/Katas-list-of-Training-JS-series)\n\n( ↑↑↑ Click the link above can get my newest kata list, Please add it to your favorites)\n\n - [#1: create your first JS function helloWorld](http://www.codewars.com/kata/571ec274b1c8d4a61c0000c8)\n - [#2: Basic data types--Number](http://www.codewars.com/kata/571edd157e8954bab500032d)\n - [#3:  Basic data types--String](http://www.codewars.com/kata/571edea4b625edcb51000d8e)\n - [#4:  Basic data types--Array](http://www.codewars.com/kata/571effabb625ed9b0600107a)\n - [#5:  Basic data types--Object](http://www.codewars.com/kata/571f1eb77e8954a812000837)\n - [#6:  Basic data types--Boolean and conditional statements if..else](http://www.codewars.com/kata/571f832f07363d295d001ba8)\n - [#7:  if..else and ternary operator](http://www.codewars.com/kata/57202aefe8d6c514300001fd)\n - [#8: Conditional statement--switch](http://www.codewars.com/kata/572059afc2f4612825000d8a)\n - [#9: loop statement --while and do..while](http://www.codewars.com/kata/57216d4bcdd71175d6000560)\n - [#10: loop statement --for](http://www.codewars.com/kata/5721a78c283129e416000999)\n - [#11: loop statement --break,continue](http://www.codewars.com/kata/5721c189cdd71194c1000b9b)\n - [#12: loop statement --for..in and for..of](http://www.codewars.com/kata/5722b3f0bd5583cf44001000)\n - [#13: Number object and  its properties](http://www.codewars.com/kata/5722fd3ab7162a3a4500031f)\n - [#14: Methods of Number object--toString() and toLocaleString()](http://www.codewars.com/kata/57238ceaef9008adc7000603)\n - [#15: Methods of Number object--toFixed(), toExponential() and toPrecision()](http://www.codewars.com/kata/57256064856584bc47000611)\n - [#16: Methods of String object--slice(), substring() and substr()](http://www.codewars.com/kata/57274562c8dcebe77e001012)\n - [#17: Methods of String object--indexOf(), lastIndexOf() and search()](http://www.codewars.com/kata/57277a31e5e51450a4000010)\n - [#18: Methods of String object--concat() split() and its good friend join()](http://www.codewars.com/kata/57280481e8118511f7000ffa)\n - [#19: Methods of String object--toUpperCase() toLowerCase() and replace()](http://www.codewars.com/kata/5728203b7fc662a4c4000ef3)\n - [#20: Methods of String object--charAt() charCodeAt() and fromCharCode()](http://www.codewars.com/kata/57284d23e81185ae6200162a)\n - [#21: Methods of String object--trim() and the string template](http://www.codewars.com/kata/5729b103dd8bac11a900119e)\n - [#22: Unlock new skills--Arrow function,spread operator and deconstruction](http://www.codewars.com/kata/572ab0cfa3af384df7000ff8)\n - [#23: methods of arrayObject---push(), pop(), shift() and unshift()](http://www.codewars.com/kata/572af273a3af3836660014a1)\n - [#24: methods of arrayObject---splice() and slice()](http://www.codewars.com/kata/572cb264362806af46000793)\n - [#25: methods of arrayObject---reverse() and sort()](http://www.codewars.com/kata/572df796914b5ba27c000c90)\n - [#26: methods of arrayObject---map()](http://www.codewars.com/kata/572fdeb4380bb703fc00002c)\n - [#27: methods of arrayObject---filter()](http://www.codewars.com/kata/573023c81add650b84000429)\n - [#28: methods of arrayObject---every() and some()](http://www.codewars.com/kata/57308546bd9f0987c2000d07)\n - [#29: methods of arrayObject---concat() and join()](http://www.codewars.com/kata/5731861d05d14d6f50000626)\n - [#30: methods of arrayObject---reduce() and reduceRight()](http://www.codewars.com/kata/573156709a231dcec9000ee8)\n - [#31: methods of arrayObject---isArray() indexOf() and toString()](http://www.codewars.com/kata/5732b0351eb838d03300101d)\n - [#32: methods of Math---round() ceil() and floor()](http://www.codewars.com/kata/5732d3c9791aafb0e4001236)\n - [#33: methods of Math---max() min() and abs()](http://www.codewars.com/kata/5733d6c2d780e20173000baa)\n - [#34: methods of Math---pow() sqrt() and cbrt()](http://www.codewars.com/kata/5733f948d780e27df6000e33)\n - [#35: methods of Math---log() and its family](http://www.codewars.com/kata/57353de879ccaeb9f8000564)\n - [#36: methods of Math---kata author's lover:random()](http://www.codewars.com/kata/5735956413c2054a680009ec)\n - [#37: Unlock new weapon---RegExp Object](http://www.codewars.com/kata/5735e39313c205fe39001173)\n - [#38: Regular Expression--\"^\",\"$\", \".\" and test()](http://www.codewars.com/kata/573975d3ac3eec695b0013e0)\n - [#39: Regular Expression--\"?\", \"*\", \"+\" and \"{}\"](http://www.codewars.com/kata/573bca07dffc1aa693000139)\n - [#40: Regular Expression--\"|\", \"[]\" and \"()\"](http://www.codewars.com/kata/573d11c48b97c0ad970002d4)\n - [#41: Regular Expression--\"\\\"](http://www.codewars.com/kata/573e6831e3201f6a9b000971)\n - [#42: Regular Expression--(?:), (?=) and (?!)](http://www.codewars.com/kata/573fb9223f9793e485000453)\n ",
  "totalAttempts": 2704,
  "totalCompleted": 881,
  "totalStars": 57,
  "voteScore": 140,
  "tags": [
    "Fundamentals",
    "Regular Expressions",
    "Tutorials"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}