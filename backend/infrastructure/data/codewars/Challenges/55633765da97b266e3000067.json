{
  "id": "55633765da97b266e3000067",
  "name": "Elo rating - one game, one pair",
  "slug": "elo-rating-one-game-one-pair",
  "category": "algorithms",
  "publishedAt": "2015-06-05T13:28:55.571Z",
  "approvedAt": "2017-04-15T16:53:20.005Z",
  "languages": [
    "python",
    "coffeescript",
    "javascript",
    "ruby"
  ],
  "url": "https://www.codewars.com/kata/55633765da97b266e3000067",
  "rank": {
    "id": -5,
    "name": "5 kyu",
    "color": "yellow"
  },
  "createdAt": "2015-05-25T14:53:28.543Z",
  "createdBy": {
    "username": "MMMAAANNN",
    "url": "https://www.codewars.com/users/MMMAAANNN"
  },
  "approvedBy": {
    "username": "GiacomoSorbi",
    "url": "https://www.codewars.com/users/GiacomoSorbi"
  },
  "description": "# Task\nCalculate a chess player's new Elo rating using their previous ratings (`experience`), their opponent's rating (`opponent`), the outcome of the new game (`score`), and the Factor k function (`k`).\n\n## Arguments\n* `experience` is an array/list containing the history of the player's ratings, with the last item in the array being the current rating. For example, if `experience` is `[995, 1025, 1050]`, then the player's 2 old ratings are 995 and 1025, and their current rating is 1050. If a player has no recorded experience (`experience = []`), use 1000 for their rating.\n* `opponent` is a single number indicating the opponent's rating\n* `score` is the outcome of the new game. `score` is `1` if the player won, `0` if the player lost, or `0.5` if it was a tie.\n* `k` is a function that takes in the `experience` array/list as an argument. `k` is an optional argument - sometimes a `k` function will be passed for you to use and sometimes not. You must write a default `k` function to use in case no `k` function is passed (see below for details).\n\n## Return\n\n* The `elo` function must return the new rating of the player rounded to the nearest integer.\n\n# Elo rating formula\n\nThe Elo rating system starts with an expectation formula:\n\n```\nexpectation = \n1 / (1+10^((opponent_rating - player_rating)/400))\n```\n\nThis can then be used in the new rating formula as follows:\n\n```\nnew_player_rating = \nplayer_rating + k(experience) * (score - expectation)\n```\n\nNote that `k` is a function taking in `experience` as a parameter.\n\n\n## Factor K function\n\nYou must write a default `k` function to use if no `k` function is passed to the `elo` function. The default `k` function should take in `experience` as an argument and return the following:\n\n* If player is a newbie (less than 30 games of experience), return 25.\n* If player is not a newbie, but player's rating has never reached 2400 before, return 15.\n* If player is not a newbie and has at least one record of a rating >= 2400, return 10.\n\n(These are pre-2011 FIDE rules.)\n\n\n# Examples\n* Example 1: `elo([], 1725, 1)` \n\nSince player has no experience, we will use 1000 as their rating. \n`opponent` rating is 1725.\n`score` is 1.\n\nThen we have:\n```\nexpectation\n= 1 / (1+10^((opponent_rating - player_rating)/400))\n= 1 / (1+10^((1725 - 1000)/400))\n= 0.01516572425000013\n```\nSince no `k` function was passed, we will use our default `k` function. Since player is a newbie (less than 30 games of experience), `k(experience)` will return 25.\n\nThen in our new_player_rating formula:\n```\nnew_player_rating\n= player_rating + k(experience) * (score - expectation)\n= 1000 + 25 * (1 - 0.01516572425000013)\n= 1024.62085689375\n```\nWhen we round this to the nearest integer our final answer is 1025.\n\n\n* Example 2:\n\n```\ndef k_algo(exp):\n    return 800//len(exp)\n    \nelo([1025, 1025, 1050, 1075, 1100, 1125, 1150,\n1175, 1200, 1225, 1250, 1275, 1300, 1325, 1350,\n1375, 1400, 1425, 1450, 1475, 1500, 1525, 1550,\n1575, 1600, 1625, 1650, 1675, 1700, 1725], \n1000,\n0, \nk_algo)\n```\n\nThe player's current rating is the last item in experience, 1725. \n`opponent` rating is 1000.\n`score` is 0.\nA function called `k_algo` is passed which we will use instead of our default `k` function.\n\nThen we have:\n```\nexpectation \n= 1 / (1+10^((opponent_rating - player_rating)/400))\n= 1 / (1+10^((1000 - 1725)/400))\n= 0.9848342757499998\n```\n\nWhen we pass `experience` to the `k_algo` function, we will get out `800//len(experience) = 26`.\n\n\nThen in our new_player_rating formula:\n```\nnew_player_rating \n= player_rating + k(experience) * (score - expectation)\n= 1725 + 26 * (0 - 0.9848342757499998)\n= 1699.3943088305\n```\nWhen we round this to the nearest integer our final answer is 1699.",
  "totalAttempts": 1723,
  "totalCompleted": 254,
  "totalStars": 19,
  "voteScore": 72,
  "tags": [
    "Games",
    "Algorithms"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}