{
  "id": "660eb351d45ad61c19a0521c",
  "name": "Aggregate Transaction Durations of ATMs",
  "slug": "aggregate-transaction-durations-of-atms",
  "category": "reference",
  "publishedAt": "2024-04-04T14:04:17.284Z",
  "approvedAt": "2024-04-05T08:31:35.364Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/660eb351d45ad61c19a0521c",
  "rank": {
    "id": -6,
    "name": "6 kyu",
    "color": "yellow"
  },
  "createdAt": "2024-04-04T14:04:01.221Z",
  "createdBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "A financial institution wants to analyze the usage patterns of its ATMs. Each ATM transaction's duration is recorded in a unique format (hh.mm), where hh represents hours and mm represents minutes. The goal is to determine the total operation time for each ATM machine to identify high-usage machines for maintenance and operational optimization.\n\nWrite a PostgreSQL query to aggregate the total duration of transactions for each ATM. The data is stored in a table named `atm_transactions`, with three columns:\n\n* `id`: primary key\n* `transaction_duration`: a string in the format hh.mm.\n* `atm_id`: an integer representing the ATM's unique identifier.\n\nYour task involves the following steps:\n\n1) Sum the Transaction Durations: Calculate the total transaction time for each ATM. Consider that transaction_duration is in the format hh.mm, and it needs to be converted into minutes for accurate summation.\n2) Convert to Original Format: After calculating the total time in minutes, convert this sum back into the original hh.mm format. Ensure that the minutes are always represented with two digits.\n3) Order and Display: Arrange the results in descending order of total transaction time and in case of a tie - by `atm_id` in descending order. Display 2 columns: the `atm_id` along with the aggregated time in the hh.mm format (`total_duration_hours`).\n\nFor this sample data:\n\n```\n| transaction_duration| atm_id |\n+---------------------+--------+\n| 1.45                | 121    |\n| 1.50                | 121    |\n| 1.50                | 121    |\n```\n\nThe desired output is the following: \n\n<table><!----><tr><th>atm_id</th><th>total_duration_hours</th></tr><tr><td>121</td><td>5.25</td></tr></table>\n\nGLHF!",
  "totalAttempts": 1454,
  "totalCompleted": 172,
  "totalStars": 9,
  "voteScore": 42,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}