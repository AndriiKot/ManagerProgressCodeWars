{
  "id": "64abc9f3da160d003eeb69f7",
  "name": "Employees and managers: part 6  (Old is Gold)",
  "slug": "employees-and-managers-part-6-old-is-gold",
  "category": "reference",
  "publishedAt": "2023-07-10T09:06:25.471Z",
  "approvedAt": "2023-07-11T03:48:07.644Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/64abc9f3da160d003eeb69f7",
  "rank": {
    "id": -6,
    "name": "6 kyu",
    "color": "yellow"
  },
  "createdAt": "2023-07-10T09:05:55.411Z",
  "createdBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "You have been provided with a PostgreSQL database that contains an `employees` table. The `employees` table has the following structure:\n\n* `id`: an integer column that uniquely identifies each employee.\n* `name`: a text column that contains the name of the employee.\n* `birthdate`: a date column that contains the birth date of the employee\n* `manager_id`: an integer column that identifies the manager of each employee. The `manager_id` corresponds to an `id` in the same employees table. This means that our table has a recursive relationship with itself - an employee can be a manager to other employees. It is nullable: top managers do not have managers above them.\n\nYour manager comes up with an interesting task for you. They want to identify managers who have two or more direct subordinates aged 60 or older. These managers have experience managing seasoned professionals. The purpose of this task is to plan a special recognition event for these managers and their subordinates.\n\nThe query should return each qualifying manager's `id`, `name`, and the count of their direct subordinates who are 60 years or older (`older_subordinate_count`).\n\nThe results should be ordered by the count of older subordinates in descending order. In case of a tie, managers should be ordered by their id in descending order.\n\nGLHF!\n\n### Desired Output\n\nThe desired output should look like this:\n\n<table><!----><tr><th>id</th><th>name</th><th>older_subordinate_count</th></tr><tr><td>1</td><td>Sana Kessler</td><td>3</td></tr><tr><td>20</td><td>Carroll Larson PhD</td><td>2</td></tr><tr><td>3</td><td>Dorene Hickle Jr.</td><td>2</td></tr></table>\n...\n\n",
  "totalAttempts": 781,
  "totalCompleted": 130,
  "totalStars": 7,
  "voteScore": 37,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}