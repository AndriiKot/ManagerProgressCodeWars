{
  "id": "59923f1301726f5430000059",
  "name": "Simple Finite State Machine Compiler",
  "slug": "simple-finite-state-machine-compiler",
  "category": "reference",
  "publishedAt": "2017-08-15T03:51:51.363Z",
  "approvedAt": "2017-10-18T17:51:40.576Z",
  "languages": [
    "python",
    "c",
    "julia",
    "ruby",
    "java",
    "javascript"
  ],
  "url": "https://www.codewars.com/kata/59923f1301726f5430000059",
  "rank": {
    "id": -5,
    "name": "5 kyu",
    "color": "yellow"
  },
  "createdAt": "2017-08-15T00:23:47.367Z",
  "createdBy": {
    "username": "awesomeaf",
    "url": "https://www.codewars.com/users/awesomeaf"
  },
  "approvedBy": {
    "username": "Voile",
    "url": "https://www.codewars.com/users/Voile"
  },
  "description": "A [Finite State Machine](https://en.wikipedia.org/wiki/Finite-state_machine) (FSM) is an abstract machine that can be in exactly one of a finite number of states at any given time. Simple examples are:\n\n* vending machines, which dispense products when the proper combination of coins is deposited;\n* elevators, whose sequence of stops is determined by the floors requested by riders;\n* traffic lights, which change sequence when cars are waiting;\n* combination locks, which require the input of combination numbers in the proper order.\n\n\nIn this Kata we are going to design our very own basic FSM ```class``` that takes in a ```string``` of ```instructions```\n\n```instructions``` is a string input with the following format:\n\n```\nfirst; next_if_input_0, next_if_input_1; output\\n\nsecond; next_if_input_0, next_if_input_1; output\\n\nthird; next_if_input_0, next_if_input_1; output\n```\n\nA basic example would be:\n\n```python\ninstructions = \\\n'''S1; S1, S2; 9\nS2; S1, S3; 10\nS3; S4, S3; 8\nS4; S4, S1; 0'''\n```\n```c\nchar instructions[] = \"S1; S1, S2; 9\\n\"\n                      \"S2; S1, S3; 10\\n\"\n                      \"S3; S4, S3; 8\\n\"\n                      \"S4; S4, S1; 0\";\n```\n```javascript\nconst instructions = (\n  'S1; S1, S2; 9\\n' +\n  'S2; S1, S3; 10\\n'+\n  'S3; S4, S3; 8\\n' +\n  'S4; S4, S1; 0' )\n```\n```julia\ninstructions = \"\"\"\nS1; S1, S2; 9\nS2; S1, S3; 10\nS3; S4, S3; 8\nS4; S4, S1; 0\"\"\"\n```\n```java\nString instructions = \"S1; S1, S2; 9\\n\" +\n                      \"S2; S1, S3; 10\\n\" +\n                      \"S3; S4, S3; 8\\n\" +\n                      \"S4; S4, S1; 0\\n\";\n```\n\nWhere each line in the string describes a state in the FSM.\nGiven in the example, if the current state was ```S1```, if the ```input is 0``` it would loop back to itself: ```S1``` and if the ```input is 1``` it would go to ```S2``` \n\n~~~if:python\nThe instructions are compiled into the `FSM` class, then the `run_fsm()` method will be called to simulate the compiled FSM.\n~~~\n~~~if:c\nThe FSM will be compiled by `fsm = compile(instructions)`, then it will be run `run_fsm(fsm, ...)`.\n~~~\n~~~if:javascript\nThe instructions are compiled into the `FSM` class, then the `runFSM()` function will be called to simulate the compiled FSM.\n~~~\n~~~if:julia\nThe FSM will be compiled into the `FSM` struct, then the `run_fsm()` function will be called to simulate the compiled FSM.\n~~~\n~~~if:java\nThe instructions are compiled into the `FSM` class, then the `runFSM()` method will be called to simulate the compiled FSM.\n~~~\n\nExample:\n\n```python\n# run_fsm takes in two arguments:\n\nstart = 'S1'\n# where start is the name of the state that it starts from\nsequence = [0, 1, 1, 0, 1]\n# where sequence is a list of inputs\n# inputs are only 1 or 0 (1 input variable) \n# to keep it simple with this Kata\nfinal_state, final_state_value, path = run_fsm(start, sequence)\n# run_fsm should return a tuple as:\nfinal_state => name of final state\nfinal_state_value => integer value of state output\npath => list of states the FSM sequence went through\n```\n```c\nFsm *fsm = compile(instructions);\n\nconst char *final_state;\nconst char *path[6];\nint final_state_value = run_fsm(\n  fsm,\n  \"S1\",                     // name of the initial state\n  (_Bool[]){0, 1, 1, 0, 1}, // input\n  5,                        // input length\n  &final_state,             // returned final state\n  &path                     // returned path\n); // returns the output from the final state\n```\n```javascript\n// runFSM takes two arguments:\n\nstart = 'S1'\n// where start is the name of the state that it starts from\n\nsequence = [0, 1, 1, 0, 1]\n// where sequence is a list of inputs\n// inputs are only 1 or 0 (1 input variable) \n// to keep it simple with this Kata\n\n// Input / Output\nrunFSM(start, sequence)  --returns-->  [final_state, final_state_value, path]\n\n// runFSM should return an array as:\nfinal_state       //= name of final state\nfinal_state_value //= integer value of state output\npath              //= array of states the FSM sequence went through\n```\n```julia\n# run_fsm takes in three arguments:\n\n# fsm is your compiled FSM\nfsm = FSM(instructions)\n\n# start is the name of the state that it starts from\nstart = \"S1\"\n\n# sequence is a list of inputs\nsequence = [0, 1, 1, 0, 1]\n# inputs are only 1 or 0 (1 input variable) \n# to keep it simple with this Kata\n\n# run_fsm should return a tuple as:\nfinal_state, final_state_value, path = run_fsm(fsm, start, sequence)\n#=\n  final_state => name of final state\n  final_state_value => integer value of state output\n  path => list of states the FSM sequence went through\n=#\n```\n```java\n// runFSM takes in two arguments:\n\n// fsm is your compiled FSM\nFSM fsm = new FSM(instructions);\n\n// start is the name of the state that it starts from\nString start = \"S1\";\n\n// sequence is a list of inputs\nint[] sequence = new int[]{0, 1, 1, 0, 1};\n// inputs are only 1 or 0 (1 input variable) \n// to keep it simple with this Kata\n\n// runFSM should return a Result as:\nResult result = fsm.runFSM(start, sequence);\n// result.finalState => name of final state\n// result.output => integer value of state output\n// result.path => array of states the FSM sequence went through\n```\n\nFrom the given example, when ```run_fsm``` is executed the following should proceed below\n\n```\ninstructions:\nS1; S1, S2; 9\nS2; S1, S3; 10\nS3; S4, S3; 8\nS4; S4, S1; 0\n\nstart: S1\nsequence: 0, 1, 1, 0, 1\n\ninput 0: S1->S1\ninput 1: S1->S2\ninput 1: S2->S3\ninput 0: S3->S4\ninput 1: S4->S1\n\nfinal state: S1\noutput: 9\n```\n\nIn this Kata are many FSM examples in real life described in:\nhttps://en.wikipedia.org/wiki/Finite-state_machine\n\nGood Luck!\n\n~~~if:java\n## Preloaded\n```java\npublic class Result {\n    public final String finalState;\n    public final int output;\n    public final String[] path;\n    \n    public Result(String finalState, int output, String... path) {\n        this.finalState = finalState;\n        this.output = output;\n        this.path = path;\n    }\n}\n```\n~~~",
  "totalAttempts": 4925,
  "totalCompleted": 829,
  "totalStars": 128,
  "voteScore": 159,
  "tags": [
    "State Machines",
    "Interpreters",
    "Compilers"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 1
  }
}