{
  "id": "66320689a8fa003242daf696",
  "name": "ABC Kata Solutions' Failures That Paved the Road to Success",
  "slug": "abc-kata-solutions-failures-that-paved-the-road-to-success",
  "category": "reference",
  "publishedAt": "2024-05-08T09:11:42.174Z",
  "approvedAt": "2024-05-08T16:05:17.809Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/66320689a8fa003242daf696",
  "rank": {
    "id": -7,
    "name": "7 kyu",
    "color": "white"
  },
  "createdAt": "2024-05-01T09:08:25.667Z",
  "createdBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "In the bustling halls of ABC Kata Solutions' headquarters, a sense of pride and accomplishment fills the air as the company commemorates its remarkable 10-year journey of transforming the tech industry. From its humble beginnings as a startup a decade ago, ABC Kata Solutions'has evolved into a global powerhouse, empowering developers worldwide and spearheading innovation at every turn. Along the way, ABC Kata Solutions encountered its fair share of challenges and setbacks. However, rather than being deterred by these obstacles, the company embraced them as invaluable learning opportunities. Each failure became a stepping stone, guiding ABC Kata Solutions towards greater resilience and success. It was through these trials and tribulations that ABC Kata Solutions honed its strategies, refined its approaches, and ultimately emerged stronger than ever before. Today, as ABC Kata Solutions reflects on its journey, it does so with gratitude for the lessons learned and optimism for the bright future ahead.\n\n### Specifications: \n\nWrite an SQL query to identify all ABC Kata Solutions projects that had a budget greater than the average project budget but were never marked as completed.\n\nWe have `projects` table: \n\n* `project_id` (int, primary key): A unique identifier for each project.\n* `project_name` (varchar, unique): The name of the project.\n* `completion_status` (varchar): Indicates the completion status of the project (e.g., \"Completed\", \"Incomplete\", \"Cancelled\").\n\nand `budget_components` table:\n\n* `id` (int, primery key): A unique identifier for each record in the table\n* `project_id` (int): A foreign key referencing the project to which the budget component belongs.\n* `component_value` (numeric): The monetary value of the budget component.\n\nYou need to: \n\n1) Calculate the total budget for each project by summing up the individual component values from the `budget_components` table.\n2) Calculate the average total budget across all projects.\n3) Retrieve all projects with a total budget greater than the calculated average.\n4) Include only projects that have not been completed: Projects with a status indicating they are not yet complete (i.e., any status other than \"Completed\") should be included in the results.\n5) Order the results by project name in ascending order.\n\nIn the result set you need to return the following columns: \n\n1) `project_id` (int)\n2) `project_name` (varchar)\n3) `completion_status` (varchar)\n4) `total_budget` (money): The total budget spent on the project, calculated by summing up the individual component values from the `budget_components` table. The formatting and rounding is handled by PostgreSQL's money datatype\n\n\nFor this sample data: \n\n```\nprojects: \n\n| project_id | project_name      | completion_status|\n+------------+-------------------+------------------+\n| 1          | Quantum Leap      | Completed        |\n| 2          | Zero Bugs Bazaar  | Incomplete       |\n| 3          | Loop De Loop      | Incomplete       |\n| 4          | Cache Money       | Cancelled        |\n| 5          | Byte Me           | Incomplete       |\n```\n\n```\nbudget_components: \n\n| id | project_id | component_value|\n+----+------------+----------------+\n| 1  | 1          | 10000          |\n| 2  | 1          | 20000          |\n| 3  | 2          | 5000           |\n| 4  | 2          | 3000           |\n| 5  | 3          | 12000          |\n| 6  | 3          | 8000           |\n| 7  | 4          | 7000           |\n| 8  | 5          | 15000          |\n| 9  | 5          | 5000           |\n```\n\nthe desired output is the following:\n\n```\n| project_id | project_name      | completion_status| total_budget |\n+------------+-------------------+------------------+--------------+\n| 5          | Byte Me           | Incomplete       | $20,000      |\n| 3          | Loop De Loop      | Incomplete       | $20,000      |\n```\n\nGLHF!\n\n",
  "totalAttempts": 1825,
  "totalCompleted": 264,
  "totalStars": 5,
  "voteScore": 54,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}