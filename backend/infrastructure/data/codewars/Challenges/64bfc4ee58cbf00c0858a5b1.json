{
  "id": "64bfc4ee58cbf00c0858a5b1",
  "name": "Books That Are Always Being Returned",
  "slug": "books-that-are-always-being-returned",
  "category": "reference",
  "publishedAt": "2023-07-25T12:51:40.251Z",
  "approvedAt": "2023-07-26T07:38:33.434Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/64bfc4ee58cbf00c0858a5b1",
  "rank": {
    "id": -7,
    "name": "7 kyu",
    "color": "white"
  },
  "createdAt": "2023-07-25T12:49:50.989Z",
  "createdBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "approvedBy": {
    "username": "dfhwze",
    "url": "https://www.codewars.com/users/dfhwze"
  },
  "description": "The library management system uses two main tables - books and loans. The books table contains details about the books, while the loans table contains details about the loans.\n\n`books`:\n\n* `book_id` (integer) - The unique identifier for a book\n* `title` (string) - The title of the book\n* `author` (string) - The author of the book\n\n`loans`:\n\n* `loan_id` (integer) - The unique identifier for a loan\n* `book_id` (integer) - The identifier for the book that was loaned, corresponds to book_id in the books table\n* `borrower_name` (string) - The name of the person who borrowed the book\n* `return_date` (date) - The date when the book was returned. If the book has not yet been returned, this field is null.\n\nYour task is to write a SQL query to find which books have always been returned every time they have been loaned out.\n\nIn the result set you need to return the `book_id` and `title` of books, for all books that have been loaned at least once and aren't currently on-loan (meaning that they do not have records with `return_date` == null). The result should be ordered by book_id in descending order.\n\nSo thus for such a sample data:\n\n(books):\n```\n| book_id | title  | author   |\n|---------|--------|----------|\n| 1       | Book 1 | Author 1 |\n| 2       | Book 2 | Author 2 |\n| 3       | Book 3 | Author 3 |\n```\n(loans):\n```\n| loan_id | book_id | borrower_name | return_date |\n|---------|---------|---------------|-------------|\n| 1       | 1       | User A        | 2023-07-01  |\n| 2       | 1       | User B        | 2023-07-10  |\n| 3       | 2       | User A        | 2023-07-05  |\n| 4       | 2       | User C        | 2023-07-15  |\n| 5       | 3       | User D        | null        |\n| 6       | 3       | User E        | 2023-07-20  |\n```\n\n\nThe result set would be:\n\n```\n| book_id | title  |\n|---------|--------|\n| 2       | Book 2 |\n| 1       | Book 1 |\n```\n\nGLHF!\n\n\n",
  "totalAttempts": 2285,
  "totalCompleted": 391,
  "totalStars": 14,
  "voteScore": 64,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 0,
    "suggestions": 0
  }
}