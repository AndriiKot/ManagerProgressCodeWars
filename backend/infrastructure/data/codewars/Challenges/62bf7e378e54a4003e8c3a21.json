{
  "id": "62bf7e378e54a4003e8c3a21",
  "name": "Team Ranking",
  "slug": "team-ranking",
  "category": "reference",
  "publishedAt": "2022-07-06T15:09:00.069Z",
  "approvedAt": "2023-04-21T14:10:38.615Z",
  "languages": [
    "sql"
  ],
  "url": "https://www.codewars.com/kata/62bf7e378e54a4003e8c3a21",
  "rank": {
    "id": -4,
    "name": "4 kyu",
    "color": "blue"
  },
  "createdAt": "2022-07-01T23:07:35.827Z",
  "createdBy": {
    "username": "BattleRattle",
    "url": "https://www.codewars.com/users/BattleRattle"
  },
  "approvedBy": {
    "username": "bornForThis",
    "url": "https://www.codewars.com/users/bornForThis"
  },
  "description": "# Introduction\n\nThere's a team competition going on and your task is to fetch the current team ranking. As teams can have different amounts of members, it would be unfair if huge teams had advantages over smaller teams. Therefore we are only considering the scores of the **best 5 members per team**. If a team consists of less than 5 members, all of its members' scores are summed up.\n\n# Task\n\nFetch the **10 best teams** with their aggregated team scores (only considering the top 5 scores per team) and also the top 5 team members each with their respective score (ordered by highest score first) within the team. See the example for details.\n\n## Requirements\n\nIn order to get a deterministic result, the following rules apply\n\n### Result Structure\n- `team_rank` (int): the rank, starting with 1\n- `team_name` (text): name of the team\n- `team_score` (int): the sum of scores of the best 5 members of this team\n- `top_members` (text): comma-separated list of the best 5 members (name + score)\n\n### Teams\n- the 10 best teams must be ordered by their score (highest to lowest)\n- if two or more teams end up with the same team score, both get the same rank assigned, but the one with the lower team ID is listed first\n- only up to 10 teams must be listed: if there are multiple teams sharing the 10th place, the one with the lower team ID must be preferred\n\n### Team Members\n- within the teams, the members must be ordered by their score (highest to lowest)\n- if two or more members have the same score, the one with the lower ID is listed first\n- only up to 5 members per team must be listed; if there are multiple members sharing the 5th place, the one with the lower ID must be preferred\n\n# Database Schema\n\nTable `teams`\n- `id` (int, primary key)\n- `name` (text)\n\nTable `team_members`\n- `id` (int, primary key)\n- `team_id` (int, foreign key)\n- `name` (text)\n- `score` (int)\n\n# Example\n\n## Given Data\n\n**teams**\n| id | name                |\n|----|---------------------|\n| 1  | Adorable Axolotl    |\n| 2  | Brave Buffalo       |\n| 3  | Colorful Chipmunk   |\n| 4  | Delightful Dolphin  |\n\n**team_members**\n| id | team_id | name     | score |\n|----|---------|----------|-------|\n| 1  | 1       | Alice    | 14    |\n| 2  | 1       | Bill     | 12    |\n| 3  | 1       | Chuck    | 7     |\n| 4  | 1       | Daryl    | 13    |\n| 5  | 1       | Emilia   | 18    |\n| 6  | 1       | Frank    | 5     |\n| 7  | 1       | Gracie   | 16    |\n| 8  | 2       | Hanna    | 33    |\n| 9  | 2       | Isaac    | 41    |\n| 10 | 3       | Jonathan | 36    |\n| 11 | 4       | Keyla     | 21    |\n| 12 | 4       | Lee      | 18    |\n| 13 | 4       | Marcus   | 26    |\n\n## Expected Output\n\n| team_rank | team_name          | team_score | top_members                                                 |\n|-----------|--------------------|------------|-------------------------------------------------------------|\n| 1         | Brave Buffalo      | 74         | Isaac (41), Hanna (33)                                      |\n| 2         | Adorable Axolotl   | 73         | Emilia (18), Gracie (16), Alice (14), Daryl (13), Bill (12) |\n| 3         | Delightful Dolphin | 65         | Marcus (26), Keyla (21), Lee (18)                           |\n| 4         | Colorful Chipmunk  | 36         | Jonathan (36)                                               |",
  "totalAttempts": 2942,
  "totalCompleted": 251,
  "totalStars": 52,
  "voteScore": 40,
  "tags": [
    "SQL",
    "Databases"
  ],
  "contributorsWanted": true,
  "unresolved": {
    "issues": 1,
    "suggestions": 0
  }
}